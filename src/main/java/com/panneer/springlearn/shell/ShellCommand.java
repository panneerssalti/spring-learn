package com.panneer.springlearn.shell;


import org.springframework.boot.autoconfigure.condition.ConditionalOnProperty;
import org.springframework.shell.standard.ShellComponent;
import org.springframework.shell.standard.ShellMethod;
import org.springframework.shell.standard.ShellOption;

@ShellComponent
@ConditionalOnProperty(name = "shell.enabled", matchIfMissing = true)
public class ShellCommand {

    private final ShellCommandClient shellCommandClient;

    public ShellCommand(ShellCommandClient shellCommandClient) {
        this.shellCommandClient = shellCommandClient;
    }

    @ShellMethod(key = "hello", value = "this is a example of saying hello")
    public String hello(@ShellOption(defaultValue = "Panneer") String arg){
        return String.join(" ","Saying hello",arg);
    }

    @ShellMethod(key = "goodbye", value = "this is a example of saying goodbye")
    public String goodBye(){
        return "Saying goodBye";
    }

    @ShellMethod(key = "dadjoke", value = "this says dad joke")
    public String dadJoke(){
        var dadjoke = shellCommandClient.random();
        return dadjoke.joke();
    }

}
